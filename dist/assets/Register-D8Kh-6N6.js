import{_ as M,r as u,v as h,x as $,d as B,o as I,e as a,f as m,y as S,w as l,i as d,u as T,g as n,E as f}from"./index-1wkJ92Wy.js";import{a as y}from"./auth-CjHXZ0fA.js";import{C as q}from"./CommonHeader-8gnz00bh.js";import"./request-DAa1bAHQ.js";import"./currency-CN74YD4t.js";const D={class:"register-container"},L={class:"register-content"},P={class:"register-right"},z={class:"login-link"},A={__name:"Register",setup(F){const w=T(),p=u(null),v=u(!1),C=u(""),t=u({username:"",password:"",confirmPassword:"",inviteCode:"",agreement:!1}),N={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],agreement:[{validator:(o,e,r)=>{e?r():r(new Error("请阅读并同意用户协议和隐私声明"))},trigger:"change"}]},g=()=>{const o=new Date;C.value=o.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-")};let c=null;h(()=>{g(),c=setInterval(g,1e3)}),$(()=>{c&&clearInterval(c)});const x=o=>{f.info("查看用户协议")},b=async()=>{try{const o=await y.sendEmailCode({email:t.value.email,emailScene:0});f.info("发送验证码成功，请查看邮箱")}catch{f.error("获取验证码失败")}},k=async()=>{p.value&&await p.value.validate(async o=>{if(o){v.value=!0;try{await y.register({firstName:t.value.firstName,lastName:t.value.lastName,email:t.value.email,password:t.value.password,emailCaptcha:t.value.emailCaptcha}),f.success("注册成功"),w.push("/login")}catch(e){console.error("注册失败:",e)}finally{v.value=!1}}})};return(o,e)=>{const r=d("el-input"),i=d("el-form-item"),_=d("el-button"),V=d("el-link"),U=d("el-checkbox"),R=d("el-form"),E=d("el-card");return I(),B("div",D,[a(q),m("div",L,[e[15]||(e[15]=S('<div class="register-left" data-v-c8fea35d><div class="slogan" data-v-c8fea35d><div class="slogan-text" data-v-c8fea35d>中国购物，递送全球</div><div class="features" data-v-c8fea35d><div class="feature-item" data-v-c8fea35d><div class="feature-title" data-v-c8fea35d>免费保险</div><div class="feature-desc" data-v-c8fea35d>保证您的资金安全</div></div><div class="feature-item" data-v-c8fea35d><div class="feature-title" data-v-c8fea35d>7*12客服</div><div class="feature-desc" data-v-c8fea35d>全球覆盖</div></div><div class="feature-item" data-v-c8fea35d><div class="feature-title" data-v-c8fea35d>100+航运公司</div><div class="feature-desc" data-v-c8fea35d>可靠的售后服务</div></div></div></div></div>',1)),m("div",P,[a(E,{class:"register-card"},{default:l(()=>[e[14]||(e[14]=m("h2",{class:"register-title"},"注册",-1)),a(R,{ref_key:"formRef",ref:p,model:t.value,rules:N},{default:l(()=>[a(i,{prop:"firstName"},{default:l(()=>[a(r,{modelValue:t.value.firstName,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.firstName=s),placeholder:"请填写姓氏","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),a(i,{prop:"lastName"},{default:l(()=>[a(r,{modelValue:t.value.lastName,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.lastName=s),placeholder:"请填写名字","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),a(i,{prop:"email"},{default:l(()=>[a(r,{modelValue:t.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.email=s),placeholder:"邮箱(请填写真实可用的邮箱)","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),a(i,{prop:"emailCaptcha"},{default:l(()=>[a(r,{modelValue:t.value.emailCaptcha,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.emailCaptcha=s),placeholder:"请输入邮箱验证码","prefix-icon":"Promotion"},{suffix:l(()=>[a(_,{class:"code-btn",type:"primary",disabled:o.isCaptchaDisabled,onClick:b},{default:l(()=>e[8]||(e[8]=[n(" 获取验证码 ")])),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(i,{prop:"password"},{default:l(()=>[a(r,{modelValue:t.value.password,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.password=s),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),a(i,{class:"agreement"},{default:l(()=>[a(U,{modelValue:t.value.agreement,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.agreement=s)},{default:l(()=>[e[10]||(e[10]=n(" 我已阅读并同意 ")),a(V,{type:"primary",onClick:e[5]||(e[5]=s=>x("user"))},{default:l(()=>e[9]||(e[9]=[n("《QC elf用户注册协议》")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:l(()=>[a(_,{type:"primary",class:"register-button",loading:v.value,onClick:k},{default:l(()=>e[11]||(e[11]=[n(" 注册 ")])),_:1},8,["loading"])]),_:1}),m("div",z,[e[13]||(e[13]=n(" 已有账号？")),a(V,{type:"primary",onClick:e[7]||(e[7]=s=>o.$router.push("/login"))},{default:l(()=>e[12]||(e[12]=[n("去登录")])),_:1})])]),_:1},8,["model"])]),_:1})])])])}}},K=M(A,[["__scopeId","data-v-c8fea35d"]]);export{K as default};
