import{_ as ee,A as te,B as ae,r as h,C as z,m as se,e as k,c,o,D as ie,x as y,G as le,d as t,t as i,q as v,F as x,f as A,h as P,H as U,a as d,w as f,I as pe,J as he,K as j,L as ve,i as X,M as Z}from"./index-CeCSaknX.js";import{l as _e,p as ge,_ as me,a as fe,e as ye}from"./order-D9FJGvh6.js";import{f as M,a as G,b as be}from"./tools-RaY47I0r.js";import{S as $e}from"./index-C6gr9_Vt.js";import{C as ke}from"./CommonHeader-zYzRu31-.js";import{C as we}from"./CommonFooter-D8Hxzz-O.js";import"./request-Db42XEdn.js";import"./currency-DoSCd0KH.js";import"./common-BTsuERNO.js";const Ce={class:"line-detail"},Ie={class:"box"},Te={class:"limit"},xe={class:"item-title"},Pe={class:"limit-table"},We={class:"top"},Le={class:"min-weight flex-1"},Ne={class:"max-weight flex-1"},De={class:"middle"},Fe={class:"bottom"},Se={class:"product-type"},Ee={class:"header"},Be={class:"item"},Me={class:"item"},qe={class:"con"},Ue={class:"title"},ze={class:"cost"},Ae={class:"title"},Ve={key:0},He={class:"priceText"},Oe={class:"keText"},Re={key:1},je={class:"priceText"},Ge={class:"keText"},Je={key:2},Ke={class:"priceText"},Ye={key:0,class:"line-detail loadingBox"},Qe={__name:"line-detail",props:{id:{type:[String,Number],required:!0,default:""},selectedLine:{type:[String,Number],default:""},fatherData:{type:Object,default:()=>{}},countryName:{type:String,default:""}},setup(J){const{proxy:w}=te(),{t:S}=ae(),C=J,E=h(),B=h(),N=async()=>{var p,I;console.log(C.fatherData),u.value=!0;const _={logisticsLineId:(p=C.fatherData)==null?void 0:p.logisticsLineId,logisticsLineCostId:(I=C.fatherData)==null?void 0:I.logisticsLineCostId},s=await _e(_);s!=null&&s.success&&(u.value=!1,g.data=s==null?void 0:s.data,E.value.innerHTML=s==null?void 0:s.data.sizeLimit,B.value.innerHTML=s==null?void 0:s.data.volumeChargeLimit,l.value[0].firstWeightPrice=s==null?void 0:s.data.firstWeightPrice,l.value[0].firstWeight=s==null?void 0:s.data.firstWeight,l.value[0].additionalWeightPrice=s==null?void 0:s.data.additionalWeightPrice,l.value[0].additionalWeight=s==null?void 0:s.data.additionalWeight,l.value[0].servicePrice=s==null?void 0:s.data.servicePrice,l.value[0].additionalWeight=s==null?void 0:s.data.additionalWeight,l.value[0].fuelCost=s==null?void 0:s.data.fuelCost,l.value[0].logisticsProviderProcessingFee=s==null?void 0:s.data.logisticsProviderProcessingFee,l.value[0].operationFee=s==null?void 0:s.data.operationFee)};z({area:void 0,timeRange:[]});const u=h(!1),g=z({data:{}});h({area:"GD-EUB To USA-美国",tips:"01/27-02/11",ageingProgress:[{label:"0-7",value:0},{label:"8-15",value:27},{label:"16-25",value:87.25},{label:"26-40",value:17},{label:">40",value:1}],rateProgress:[{label:w.$t("estimate.NotYetDelivered"),value:0}],limitInfo:{minW:null,maxW:2e3,size:"长宽高之和不得大于90cm | 最长边不得大于60cm",vo:"该路线按照包裹实际重量计费。",productInfo:[{title:"服饰",typeInfo:[{enabled:!0,type:"普货"},{enabled:!0,type:"普通品牌"},{enabled:!0,type:"普货"},{enabled:!1,type:"普货"}]},{title:"饰品",typeInfo:[{enabled:!0,type:"普货"},{enabled:!0,type:"普通品牌"},{enabled:!0,type:"普货"},{enabled:!1,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"},{enabled:!0,type:"普通品牌"},{enabled:!0,type:"普货"},{enabled:!1,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"}]},{title:"鞋子",typeInfo:[{enabled:!0,type:"普货"}]}]}});const l=h([{firstWeightPrice:null,additionalWeightPrice:null,servicePrice:null,firstWeight:null,additionalWeight:null,fuelCost:null,logisticsProviderProcessingFee:null,operationFee:null}]),m=()=>({style:{height:"50px",padding:"0px","font-size":"12px"}}),W=()=>({style:{"font-size":"12px",padding:"13px 16px",background:"#fdfdfd"}}),V=[{title:w.$t("estimate.firstWeightPrice"),dataIndex:"firstWeightPrice",align:"center",width:"16.6%",customCell:m,customHeaderCell:W},{title:w.$t("estimate.additionalWeightPrice"),dataIndex:"additionalWeightPrice",align:"center",width:"16.6%",customCell:m,customHeaderCell:W},{title:w.$t("estimate.carrierProcessingFee"),dataIndex:"logisticsProviderProcessingFee",align:"center",width:"16.6%",key:"price",customCell:m,customHeaderCell:W},{title:w.$t("estimate.fuelCharge"),dataIndex:"fuelCost",align:"center",width:"16.6%",key:"price",customCell:m,customHeaderCell:W},{title:w.$t("estimate.operationFee"),dataIndex:"operationFee",align:"center",width:"16.6%",key:"price",customCell:m,customHeaderCell:W},{title:w.$t("estimate.servicePrice"),dataIndex:"servicePrice",align:"center",key:"price",width:"16.6%",customCell:m,customHeaderCell:W}];return se(()=>{N()}),(_,s)=>{const p=k("a-table"),I=k("a-spin");return o(),c(x,null,[ie(t("div",Ce,[t("div",Ie,[t("section",Te,[t("div",xe,i(_.$t("estimate.PackageRestrictions")),1),t("div",Pe,[t("div",We,[t("div",Le,i(_.$t("estimate.estTip9"))+" "+i(g.data.packageWeightMin?g.data.packageWeightMin+"g":"--"),1),t("div",Ne,i(_.$t("estimate.estTip10"))+" "+i(g.data.packageWeightMax?g.data.packageWeightMax+"g":"--"),1)]),t("div",De,[v(i(_.$t("estimate.estTip11"))+" ",1),t("span",{ref_key:"refSizeLimit",ref:E},null,512)]),t("div",Fe,[v(i(_.$t("estimate.estTip12"))+" ",1),t("span",{ref_key:"refVolumeChargeLimit",ref:B},null,512)])]),t("div",Se,[t("div",Ee,[t("div",Be,[s[0]||(s[0]=t("span",{class:"circle disabled"},null,-1)),v(i(_.$t("estimate.estTip13")),1)]),t("div",Me,[s[1]||(s[1]=t("span",{class:"circle enabled"},null,-1)),v(i(_.$t("estimate.estTip14")),1)])]),t("div",qe,[(o(!0),c(x,null,A(g.data.productTypeLabelList,(L,D)=>(o(),c("div",{key:D,class:"item"},[t("div",Ue,i(P(M)(L,"labelName","en"))+":",1),(o(!0),c(x,null,A(L.children,b=>(o(),c("div",{key:b.labelId,class:U(["tag",b.logisticsLineSupportFlag?"no":"yes"])},i(P(M)(b,"labelName","en")),3))),128))]))),128))])])])]),t("div",ze,[t("div",Ae,i(_.$t("estimate.estTip15")),1),d(p,{"data-source":l.value,bordered:"",columns:V,pagination:!1},{bodyCell:f(({column:L,record:D,index:b,text:F})=>[L.dataIndex==="firstWeightPrice"?(o(),c("div",Ve,[t("span",He,"¥ "+i(P(G)(F,!1)),1),t("span",Oe,"/"+i(D.firstWeight)+" g",1)])):L.dataIndex==="additionalWeightPrice"?(o(),c("div",Re,[t("span",je,"¥ "+i(P(G)(F,!1)),1),t("span",Ge,"/"+i(D.additionalWeight)+" g",1)])):L.key==="price"?(o(),c("div",Je,[t("span",Ke,[F!==null?(o(),c(x,{key:0},[v("¥ "+i(P(G)(F,!1)),1)],64)):(o(),c(x,{key:1},[v("-")],64))])])):y("",!0)]),_:1},8,["data-source"])])],512),[[le,!u.value]]),u.value?(o(),c("div",Ye,[d(I)])):y("",!0)],64)}}},Xe=ee(Qe,[["__scopeId","data-v-a7f4c50e"]]),Ze={class:"estima"},et={class:"form"},tt={class:"title"},at={class:"tips"},st={class:"con"},it={class:"left"},lt={class:"popOut"},ot={class:"form-item country-select-box"},nt={class:"label required"},ct={class:"value-con country-con"},dt={key:0,class:"close-icon"},rt={class:"form-item w420"},ut={class:"label required"},pt={class:"value-con"},ht={class:"popOut"},vt={class:"productTypeSelect"},_t={class:"selectAb"},gt={class:"form-item w420"},mt={class:"flex-1"},ft={class:"label"},yt={class:"value-con"},bt={class:"flex-1"},$t={class:"label"},kt={class:"value-con"},wt={class:"flex-1"},Ct={class:"label"},It={class:"value-con"},Tt={class:"right"},xt={key:0},Pt={key:0,class:"table-data"},Wt={class:"tips"},Lt={class:"line-data"},Nt={class:"con"},Dt={class:"poster"},Ft={class:"img"},St=["src"],Et={class:"ff-p4 qa-text insurance-desc"},Bt={key:0,class:"insurance",src:me,alt:""},Mt={class:"name"},qt={key:0,class:"tax"},Ut={class:"amount"},zt={class:"col999 qa"},At={class:"ff-p4 qa-text"},Vt={class:"num"},Ht={class:"time"},Ot={class:"col999"},Rt={class:"day"},jt={class:"desc col999"},Gt={key:0,class:"block-word desc-text"},Jt={key:1,class:"desc-text"},Kt={class:"action"},Yt={class:"btn-box"},Qt={class:"edit-btn-box"},Xt={key:0,class:"notice"},Zt={class:"tipBottomBoxInner"},ea={key:1,class:"no-data"},ta={class:"tips"},aa={key:2},sa={key:1,class:"no-data no-data-empty no-data-loading"},ia={__name:"index",setup(J){const w=ae(),S=he(),C=h(!1),E=h(!1),{proxy:B}=te(),N=h(!1),u=h(null),g=z({data:[]}),l=z({country:null,weight:null,productType:[],length:"",width:"",height:""});h(!1);const m=h(),W=()=>{m.value.openPopver()},V=()=>{u.value="",l.country=null,m.value.countrySearch(u.value)},_=()=>{u.value===""&&(l.country=null),m.value.countrySearch(u.value)},s=a=>{l.country=a.id,u.value=`${a.areaEnName} ${a.areaName}`},p=h(),I=h([]),L=a=>{console.log(a,"i"),p.value=a},D=async()=>{const a=await ge();g.data=((a==null?void 0:a.data)||[]).map(e=>(e.labelNameEn=e.labelNameEn.replace("&amp;","&"),e))},b=async()=>{if(!l.country&&l.country!==0){Z.warning(B.$t("estimate.please_select_country"));return}if(!l.weight){Z.warning(B.$t("estimate.pleaseInputWeight"));return}C.value=!0,N.value=!0,console.log(l.productType);const a=[],e=g.data.map(r=>r.labelId);l.productType.forEach(r=>{if(r.length===1&&e.indexOf(r[0])>-1){const H=e.indexOf(r[0]),O=g.data[H].children.map(q=>q.labelId);a.push(...O)}else a.push(...r)});const $={areaLibraryId:l.country,weight:Number(l.weight),labelId:a,length:Number(l.length),width:Number(l.width),height:Number(l.height)};try{const r=await ye($);E.value=!0,I.value=r==null?void 0:r.data,C.value=!1,N.value=!1}catch{C.value=!1,N.value=!1}},F=({labels:a,selectedOptions:e})=>{if(a.length>1)return a.join("/");if(a.length===1){let $="";return e[0].children.forEach(r=>{$+=`${M(e[0],"labelName","En")}/${M(r,"labelName","En")};`}),$}},oe=a=>{let e=a.target.value.replace(/[^0-9.]/g,"");e=e.replace(/(\..*?)\./g,"$1"),e=e.replace(/(\.\d{2})./g,"$1"),e.startsWith(".")&&(e=`0${e}`),e=e.replace(/^(0+)(\d)/,"$2"),console.log(e,"value"),l.weight=e},ne=a=>{let e=a.target.value.replace(/[^0-9.]/g,"");e=e.replace(/(\..*?)\./g,"$1"),e=e.replace(/(\.\d{1})./g,"$1"),e.startsWith(".")&&(e=`0${e}`),e=e.replace(/^(0+)(\d)/,"$2"),console.log(e,"value"),e>1e4&&(e="10000"),l.length=e},ce=a=>{let e=a.target.value.replace(/[^0-9.]/g,"");e=e.replace(/(\..*?)\./g,"$1"),e=e.replace(/(\.\d{1})./g,"$1"),e.startsWith(".")&&(e=`0${e}`),e=e.replace(/^(0+)(\d)/,"$2"),console.log(e,"value"),e>1e4&&(e="10000"),l.width=e},de=a=>{let e=a.target.value.replace(/[^0-9.]/g,"");e=e.replace(/(\..*?)\./g,"$1"),e=e.replace(/(\.\d{1})./g,"$1"),e.startsWith(".")&&(e=`0${e}`),e=e.replace(/^(0+)(\d)/,"$2"),console.log(e,"value"),e>1e4&&(e="10000"),l.height=e};return pe(()=>{var a;D(),S.query.productWeight&&(l.weight=(a=S==null?void 0:S.query)==null?void 0:a.productWeight)}),se(()=>{}),(a,e)=>{const $=k("a-input"),r=k("svg-icon"),H=k("a-cascader"),O=k("el-button"),q=k("a-popover"),K=k("a-button"),Y=k("a-spin"),re=k("a-empty");return o(),c(x,null,[t("div",Ze,[d(ke),t("div",et,[t("div",tt,i(a.$t("estimate.ShippingCostEstimate")),1),t("div",at,i(a.$t("estimate.estTip1")),1),t("div",st,[t("div",it,[t("div",lt,[t("div",ot,[t("span",nt,i(a.$t("estimate.WarehouseTo")),1),d($e,{ref_key:"refSelectCountry",ref:m,onCountryChange:s},{default:f(()=>[t("div",ct,[d($,{value:u.value,"onUpdate:value":e[0]||(e[0]=n=>u.value=n),bordered:!1,placeholder:a.$t("estimate.selectCountry"),style:{width:"100%",padding:"0 11px"},onClick:j(W,["stop"]),onChange:_},{suffix:f(()=>[u.value?(o(),c("span",dt,[d(P(ve),{onClick:j(V,["stop"])})])):y("",!0)]),_:1},8,["value","placeholder"]),d(r,{class:"arrow-icon",name:"arrow-down",onClick:e[1]||(e[1]=j(()=>{},["stop"]))})])]),_:1},512)])]),t("div",rt,[t("span",ut,i(a.$t("estimate.weight")),1),t("div",pt,[d($,{value:l.weight,"onUpdate:value":e[2]||(e[2]=n=>l.weight=n),bordered:!1,placeholder:a.$t("estimate.pleaseInputWeight"),style:{width:"100%"},onChange:oe,onPressEnter:b},null,8,["value","placeholder"])])]),t("div",ht,[t("div",vt,[d(H,{ref:"refProductType",value:l.productType,"onUpdate:value":e[3]||(e[3]=n=>l.productType=n),options:g.data,multiple:"","show-search":"","expand-trigger":"hover","max-tag-count":1,style:{height:"36px",width:"484px","line-height":"36px","margin-right":"16px",background:"#fff","border-radius":"4px"},"field-names":{label:P(w).locale.value=="zh"?"labelName":"labelNameEn",value:"labelId"},"display-render":F,placeholder:a.$t("estimate.selectPlaceholder")},null,8,["value","options","field-names","placeholder"]),d(r,{class:"arrow-icon",name:"arrow-down"}),t("div",_t,[t("span",null,i(a.$t("estimate.ProductTypes")),1)])])]),t("div",gt,[t("div",mt,[t("span",ft,i(a.$t("estimate.long")),1),t("div",yt,[d($,{value:l.length,"onUpdate:value":e[4]||(e[4]=n=>l.length=n),bordered:!1,placeholder:"cm",style:{width:"100%"},onChange:ne,onPressEnter:b},null,8,["value"])])]),t("div",bt,[t("span",$t,i(a.$t("estimate.width")),1),t("div",kt,[d($,{value:l.width,"onUpdate:value":e[5]||(e[5]=n=>l.width=n),bordered:!1,placeholder:"cm",style:{width:"100%"},onChange:ce,onPressEnter:b},null,8,["value"])])]),t("div",wt,[t("span",Ct,i(a.$t("estimate.height")),1),t("div",It,[d($,{value:l.height,"onUpdate:value":e[6]||(e[6]=n=>l.height=n),bordered:!1,placeholder:"cm",style:{width:"100%"},onChange:de,onPressEnter:b},null,8,["value"])])])])]),t("div",Tt,[d(O,{class:"search-btn",type:"primary",loading:C.value,onClick:b},{default:f(()=>[v(i(a.$t("estimate.Inquire")),1)]),_:1},8,["loading"])])])]),N.value?y("",!0):(o(),c("div",xt,[I.value.length?(o(),c("div",Pt,[t("div",Wt,i(a.$t("estimate.estTip2")),1),t("div",Lt,[d(Y,{spinning:C.value},{default:f(()=>[(o(!0),c(x,null,A(I.value,(n,T)=>{var Q;return o(),c("div",{key:T,class:U(["list",n.checkFlag===0?"disabled":""])},[t("div",{class:U({box:!0,boxActive:p.value===T})},[t("div",Nt,[t("div",Dt,[t("div",Ft,[t("img",{class:"icon",src:n.logisticsLineIcon,alt:""},null,8,St),d(q,{trigger:"click",placement:"right"},{content:f(()=>[t("pre",Et,i(n.insuranceDesc),1)]),default:f(()=>[n.configureInsurance?(o(),c("img",Bt)):y("",!0)]),_:2},1024)]),t("div",Mt,i(P(M)(n,"logisticsLineName","en")),1),n.includeTaxes?(o(),c("div",qt,i(a.$t("estimate.taxExemption")),1)):y("",!0)]),t("div",Ut,[t("div",zt,[v(i(a.$t("estimate.TransportationCosts"))+" ",1),d(q,null,{content:f(()=>[t("pre",At,i(n.volumeWeightDesc),1)]),default:f(()=>[e[8]||(e[8]=t("img",{src:fe,alt:""},null,-1))]),_:2},1024)]),t("div",Vt,i(P(be)(n,"totalFreightPrice")),1)]),t("div",Ht,[t("span",Ot,i(a.$t("estimate.ShippingTime")),1),t("div",null,[v(i(n.logisticsTimeMin)+"-"+i(n.logisticsTimeMax)+" ",1),t("span",Rt,i(a.$t("estimate.dayText")),1)])]),t("div",jt,[p.value===T?(o(),c("pre",Gt,i(n.logisticsLineDesc)+`
                      `,1)):(o(),c("div",Jt,i(n.logisticsLineDesc),1))]),t("div",Kt,[t("div",Yt,[p.value!==T?(o(),X(K,{key:0,color:"#FF1E05",class:"btn",onClick:R=>L(T)},{default:f(()=>[v(i(a.$t("estimate.lookDetail")),1)]),_:2},1032,["onClick"])):y("",!0)]),t("div",Qt,[ie(d(K,{color:"#666",plain:"",class:"edit-btn",onClick:e[7]||(e[7]=R=>p.value=void 0)},{default:f(()=>[v(i(a.$t("estimate.pack_up")),1)]),_:2},1536),[[le,p.value===T]])])])]),n.notice?(o(),c("div",Xt,i(n.notice),1)):y("",!0)],2),((Q=n.uncheckDesc)==null?void 0:Q.length)>0?(o(),c("div",{key:0,class:U({tipBottomBox:!0,tipBottomBoxActive:p.value===T})},[t("div",Zt,[v(i(a.$t("estimate.UnavailableReason"))+"： ",1),(o(!0),c(x,null,A(n.uncheckDesc,(R,ue)=>(o(),c(x,{key:ue},[v(i(R)+"；",1)],64))),128))])],2)):y("",!0),p.value===T?(o(),X(Xe,{key:1,id:T,"selected-line":p.value,"father-data":n,"country-name":u.value},null,8,["id","selected-line","father-data","country-name"])):y("",!0)],2)}),128))]),_:1},8,["spinning"])])])):!I.value.length&&!E.value?(o(),c("div",ea,[t("span",ta,i(a.$t("estimate.estTip4")),1)])):(o(),c("div",aa,[d(re,{class:"no-data no-data-empty"})]))])),N.value?(o(),c("div",sa,[d(Y)])):y("",!0)]),d(we)],64)}}},va=ee(ia,[["__scopeId","data-v-4542e4ba"]]);export{va as default};
