import{_ as O,C as z,r as g,v as U,D as V,E as q,d as r,o,f as a,e as l,w as n,i as c,q as t,y as k,F as b,j as y,n as $,g as E}from"./index-CfP2wwIO.js";import{a as S}from"./orderList-IqwQj0G5.js";import"./request-CL1ELcKn.js";import"./currency-Bb07pYST.js";const R={class:"order-list"},j={class:"order-list-content"},W={class:"user-info"},G={key:0},H={key:0},J={key:0},K={class:"timeline"},Q={class:"image-list"},X={key:1,class:"estimate-info"},Y={key:0},Z={class:"timeline"},x={class:"pagination"},w={class:"total"},ee={__name:"OrderShareList",setup(te){const N=V(),m=z({currentPage:1,pageSize:10});z({userNo:"",trackingNo:"",isMark:0});const f=g([]),h=g(0),I=g(!1),D=g(null),v=g(-1);U(()=>{A()});const A=async()=>{try{let s={pageNo:m.currentPage,pageSize:m.pageSize};if(N.query.code){const u=N.query.code,_=await S.decodeSharingCode({code:u});s.userNo=_.data.userNo}s.isMark||delete s.isMark,f.value=[],v.value<10?(s.status=v.value,v.value===-1&&delete s.status):s.status=v.value;const d=await S.sharingListForBusiness(s);f.value=d.data,h.value=d.total}catch(s){D.value=s.message||"获取订单失败",q.error("获取订单列表失败")}finally{I.value=!1}},M=({row:s})=>s.isMark?"status-mark":"";return(s,d)=>{const u=c("el-table-column"),_=c("el-timeline-item"),L=c("el-timeline"),C=c("el-popover"),P=c("el-image"),T=c("el-tag"),B=c("el-table"),F=c("el-pagination");return o(),r("div",R,[a("div",j,[l(B,{data:f.value,style:{width:"100%"},"row-class-name":M},{default:n(()=>[l(u,{prop:"userNo",label:s.$t("package.table.customerCode"),width:"100"},null,8,["label"]),l(u,{prop:"userNo",label:s.$t("package.table.addressInfo"),width:"320"},{default:n(({row:e})=>[a("div",W,[e.status<10?(o(),r("div",G,[a("div",null,t(s.$t("customers.info.name"))+"："+t(e.userAddressInfo.firstName),1),a("div",null,t(s.$t("customers.info.postcode"))+"："+t(e.userAddressInfo.postcode),1),a("div",null,t(s.$t("customers.info.phoneNumber"))+"："+t(e.userAddressInfo.mobile),1),a("div",null,t(s.$t("customers.info.email"))+"："+t(e.userAddressInfo.email),1),a("div",null,t(s.$t("customers.info.address"))+"："+t(e.userAddressInfo.countryName)+" "+t(e.userAddressInfo.provinceName)+" "+t(e.userAddressInfo.cityName)+" "+t(e.userAddressInfo.address),1)])):k("",!0)])]),_:1},8,["label"]),l(u,{prop:"logisticsNumber",label:s.$t("package.table.expressDelivery")},{default:n(({row:e})=>[e.status<10?(o(),r("div",H,[a("div",null,t(s.$t("trackingNumber"))+"："+t(e.logisticsNumber),1),l(C,{width:800},{reference:n(()=>{var i;return[e.trackingList&&e.trackingList.length>0?(o(),r("div",J,t(s.$t("logisticsTrack"))+"："+t(e.trackingList&&((i=e.trackingList[0])==null?void 0:i.logisticsDesc)),1)):k("",!0)]}),default:n(()=>[a("div",K,[l(L,null,{default:n(()=>[(o(!0),r(b,null,y(e.trackingList,(i,p)=>(o(),$(_,{key:p,timestamp:i.gmtTime,placement:"top"},{default:n(()=>[a("p",null,t(i.logisticsDesc),1)]),_:2},1032,["timestamp"]))),128))]),_:2},1024)])]),_:2},1024),a("div",Q,[(o(!0),r(b,null,y(e.imgUrlList,(i,p)=>(o(),r("div",{key:i,class:"block"},[l(P,{class:"image-list-item",style:{width:"60px",height:"60px"},"close-on-press-escape":"","preview-teleported":"",src:i,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.imgUrlList,"initial-index":p,"z-index":"8",fit:"cover"},null,8,["src","preview-src-list","initial-index"])]))),128))])])):(o(),r("div",X,[a("div",null,[a("div",null,"国际单号："+t(e.orderNo),1),a("div",null,"物流线路："+t(e.logisticsLine),1),l(C,{width:800},{reference:n(()=>{var i;return[e.trackingList&&e.trackingList.length>0?(o(),r("div",Y,t(s.$t("logisticsTrack"))+"："+t(e.trackingList&&((i=e.trackingList[0])==null?void 0:i.logisticsDesc)),1)):k("",!0)]}),default:n(()=>[a("div",Z,[l(L,null,{default:n(()=>[(o(!0),r(b,null,y(e.trackingList,(i,p)=>(o(),$(_,{key:p,timestamp:i.gmtTime,placement:"top"},{default:n(()=>[a("p",null,t(i.logisticsDesc),1)]),_:2},1032,["timestamp"]))),128))]),_:2},1024)])]),_:2},1024),a("div",null,"包裹运费："+t(e.estimateFreightPrice),1)]),a("div",null,[a("div",null," 长 "+t(e.length)+"，宽"+t(e.width)+"，高"+t(e.height),1),a("div",null,t(e.realWeight)+"kg；内含8件",1),d[2]||(d[2]=a("div",null,"在途 7 天",-1))])]))]),_:1},8,["label"]),l(u,{prop:"gmtCreate",label:s.$t("commont.createTime"),width:"100"},null,8,["label"]),l(u,{prop:"statusDesc",label:s.$t("package.table.latestStatus"),width:"100"},{default:n(({row:e})=>[l(T,null,{default:n(()=>[E(t(e.statusDesc),1)]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),a("div",x,[a("div",w,t(s.$t("commont.total"))+" "+t(h.value)+" "+t(s.$t("commont.page")),1),l(F,{"current-page":m.currentPage,"onUpdate:currentPage":d[0]||(d[0]=e=>m.currentPage=e),"page-size":m.pageSize,"onUpdate:pageSize":d[1]||(d[1]=e=>m.pageSize=e),"page-sizes":[10,20,50],total:h.value,layout:"prev, pager, next, sizes",onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}}},ne=O(ee,[["__scopeId","data-v-3e67f7fc"]]);export{ne as default};
