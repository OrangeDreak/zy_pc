import{r as B}from"./request-Ci6vZ18k.js";import{_ as D,r as s,o as P,c as R,b as f,e,w as o,f as l,S as I,y as N,j as b,l as T,t as j}from"./index-CAD5YEHZ.js";import"./auth-BVoTKOlD.js";const q={getLoginLogs(g){return B({url:"/api/logs/login",method:"get",params:g})}},E={class:"login-log"},F={__name:"LoginLog",setup(g){const p=s(!1),m=s([]),v=s(0),r=s(1),i=s(10),n=s({username:"",dateRange:[]}),d=async()=>{p.value=!0;try{const c=await q.getLoginLogs({page:r.value,pageSize:i.value,...n.value});m.value=c.list,v.value=c.total}finally{p.value=!1}},L=()=>{r.value=1,d()},y=()=>{d()};return P(()=>{d()}),(c,t)=>{const V=l("el-input"),_=l("el-form-item"),k=l("el-date-picker"),w=l("el-button"),C=l("el-form"),u=l("el-table-column"),S=l("el-tag"),x=l("el-table"),z=l("el-pagination"),h=l("el-card"),U=I("loading");return f(),R("div",E,[e(h,null,{default:o(()=>[e(C,{inline:!0,model:n.value},{default:o(()=>[e(_,{label:"用户名"},{default:o(()=>[e(V,{modelValue:n.value.username,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(_,{label:"日期范围"},{default:o(()=>[e(k,{modelValue:n.value.dateRange,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(w,{type:"primary",onClick:L},{default:o(()=>t[4]||(t[4]=[b("搜索")])),_:1})]),_:1})]),_:1},8,["model"]),N((f(),T(x,{data:m.value},{default:o(()=>[e(u,{prop:"username",label:"用户名"}),e(u,{prop:"ip",label:"IP地址"}),e(u,{prop:"loginTime",label:"登录时间"}),e(u,{prop:"status",label:"状态"},{default:o(a=>[e(S,{type:a.row.status?"success":"danger"},{default:o(()=>[b(j(a.row.status?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[U,p.value]]),e(z,{"current-page":r.value,"onUpdate:currentPage":t[2]||(t[2]=a=>r.value=a),"page-size":i.value,"onUpdate:pageSize":t[3]||(t[3]=a=>i.value=a),total:v.value,onCurrentChange:y},null,8,["current-page","page-size","total"])]),_:1})])}}},H=D(F,[["__scopeId","data-v-733bb631"]]);export{H as default};
