import{_ as A,r as p,m as B,n as D,c as I,o as S,a as t,d as o,t as r,w as s,e as d,g as L,q as m,E as _}from"./index-CeCSaknX.js";import{a as C}from"./auth-S2IWD3qL.js";import{C as P}from"./CommonHeader-zYzRu31-.js";import z from"./article-DIn3ecZd.js";import"./request-Db42XEdn.js";import"./currency-DoSCd0KH.js";import"./common-BTsuERNO.js";import"./CommonFooter-D8Hxzz-O.js";const F={class:"register-container"},G={class:"register-content"},H={class:"register-left"},Q={class:"slogan"},j={class:"slogan-text"},J={class:"features"},K={class:"feature-item"},O={class:"feature-title"},W={class:"feature-desc"},X={class:"feature-item"},Y={class:"feature-title"},Z={class:"feature-desc"},x={class:"feature-item"},ee={class:"feature-title"},le={class:"feature-desc"},te={class:"register-right"},ae={class:"register-title"},oe={class:"login-link"},se={class:"dialog-content"},ie={__name:"Register",setup(re){const $=L(),g=p(null),f=p(!1),y=p(""),c=p(!1),a=p({username:"",password:"",confirmPassword:"",inviteCode:"",agreement:!1}),b={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],agreement:[{validator:(e,l,n)=>{l?n():n(new Error("请阅读并同意用户协议和隐私声明"))},trigger:"change"}]},h=()=>{const e=new Date;y.value=e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-")};let v=null;B(()=>{h(),v=setInterval(h,1e3)}),D(()=>{v&&clearInterval(v)});const N=()=>{c.value=!0},k=e=>{c.value=!1,e()},U=async()=>{try{const e=await C.sendEmailCode({email:a.value.email,emailScene:0});_.info("发送验证码成功，请查看邮箱")}catch{_.error("获取验证码失败")}},E=async()=>{g.value&&await g.value.validate(async e=>{if(e){f.value=!0;try{await C.register({firstName:a.value.firstName,lastName:a.value.lastName,email:a.value.email,password:a.value.password,emailCaptcha:a.value.emailCaptcha}),_.success("注册成功"),$.push("/login")}catch(l){console.error("注册失败:",l)}finally{f.value=!1}}})};return(e,l)=>{const n=d("el-input"),u=d("el-form-item"),V=d("el-button"),w=d("el-link"),R=d("el-checkbox"),T=d("el-form"),M=d("el-card"),q=d("el-dialog");return S(),I("div",F,[t(P),o("div",G,[o("div",H,[o("div",Q,[o("div",j,r(e.$t("login.tip1")),1),o("div",J,[o("div",K,[o("div",O,r(e.$t("login.tip2")),1),o("div",W,r(e.$t("login.tip3")),1)]),o("div",X,[o("div",Y,r(e.$t("login.tip4")),1),o("div",Z,r(e.$t("login.tip5")),1)]),o("div",x,[o("div",ee,r(e.$t("login.tip6")),1),o("div",le,r(e.$t("login.tip7")),1)])])])]),o("div",te,[t(M,{class:"register-card"},{default:s(()=>[o("h2",ae,r(e.$t("login.register")),1),t(T,{ref_key:"formRef",ref:g,model:a.value,rules:b},{default:s(()=>[t(u,{prop:"firstName"},{default:s(()=>[t(n,{modelValue:a.value.firstName,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value.firstName=i),placeholder:e.$t("login.name1"),"prefix-icon":"Message"},null,8,["modelValue","placeholder"])]),_:1}),t(u,{prop:"lastName"},{default:s(()=>[t(n,{modelValue:a.value.lastName,"onUpdate:modelValue":l[1]||(l[1]=i=>a.value.lastName=i),placeholder:e.$t("login.name2"),"prefix-icon":"Message"},null,8,["modelValue","placeholder"])]),_:1}),t(u,{prop:"email"},{default:s(()=>[t(n,{modelValue:a.value.email,"onUpdate:modelValue":l[2]||(l[2]=i=>a.value.email=i),placeholder:e.$t("login.emailTip2"),"prefix-icon":"Message"},null,8,["modelValue","placeholder"])]),_:1}),t(u,{prop:"emailCaptcha"},{default:s(()=>[t(n,{modelValue:a.value.emailCaptcha,"onUpdate:modelValue":l[3]||(l[3]=i=>a.value.emailCaptcha=i),placeholder:e.$t("login.emailCodeTip"),"prefix-icon":"Promotion"},{suffix:s(()=>[t(V,{class:"code-btn",type:"primary",disabled:e.isCaptchaDisabled,onClick:U},{default:s(()=>[m(r(e.$t("login.getEmailCode")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","placeholder"])]),_:1}),t(u,{prop:"password"},{default:s(()=>[t(n,{modelValue:a.value.password,"onUpdate:modelValue":l[4]||(l[4]=i=>a.value.password=i),type:"password",placeholder:e.$t("login.passwordTip1"),"prefix-icon":"Lock","show-password":""},null,8,["modelValue","placeholder"])]),_:1}),t(u,{class:"agreement"},{default:s(()=>[t(R,{modelValue:a.value.agreement,"onUpdate:modelValue":l[6]||(l[6]=i=>a.value.agreement=i)},{default:s(()=>[m(r(e.$t("login.agree"))+" ",1),t(w,{type:"primary",onClick:l[5]||(l[5]=i=>N("agreement"))},{default:s(()=>[m("《QC elf"+r(e.$t("login.agreement"))+"》",1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:s(()=>[t(V,{type:"primary",class:"register-button",loading:f.value,onClick:E},{default:s(()=>[m(r(e.$t("login.register")),1)]),_:1},8,["loading"])]),_:1}),o("div",oe,[m(r(e.$t("login.haveAccount")),1),t(w,{type:"primary",onClick:l[7]||(l[7]=i=>e.$router.push("/login"))},{default:s(()=>[m(r(e.$t("login.login2")),1)]),_:1})])]),_:1},8,["model"])]),_:1})])]),t(q,{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=i=>c.value=i),width:"1320","before-close":k},{default:s(()=>[o("div",se,[t(z,{id:"0",type:"agreement"})])]),_:1},8,["modelValue"])])}}},ve=A(ie,[["__scopeId","data-v-bc9253c6"]]);export{ve as default};
